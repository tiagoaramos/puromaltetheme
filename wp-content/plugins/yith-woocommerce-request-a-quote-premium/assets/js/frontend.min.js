jQuery(document).ready(function(a){"use strict";var d=(a("body"),a(".add-request-quote-button"),a(document).find(".widget_ywraq_list_quote, .widget_ywraq_mini_list_quote")),e="undefined"!=typeof ywraq_frontend&&ywraq_frontend.block_loader,g=(a(".yith-ywraq-item-remove"),a(".shipping_address")),h=a(".woocommerce-billing-fields");a.fn.yith_ywraq_variations=function(){var b=a('[name|="product_id"]'),c=b.val(),d=a(".add-to-quote-"+c).find("a.add-request-quote-button"),e=d.parents(".yith-ywraq-add-to-quote"),f=a('[name|="variation_id"]');if(!f.length)return!1;d.show().addClass("disabled"),f.on("change",function(){var c=[],f=""+e.attr("data-variation");"undefined"!=f&&(c=f.split(",")),a(".yith_ywraq_add_item_browse-list-"+b.val()).hide().removeClass("show"),a(".yith_ywraq_add_item_product-response-"+b.val()).hide().removeClass("show"),a(".yith_ywraq_add_item_response-"+b.val()).show().removeClass("hide"),""==a(this).val()?(d.show().addClass("disabled"),d.parent().show().removeClass("hide").removeClass("addedd"),a(".yith_ywraq_add_item_product-response-"+b.val()).hide().removeClass("show"),a(".yith_ywraq_add_item_response-"+b.val()).hide().removeClass("show"),a(".yith_ywraq_add_item_browse-list-"+b.val()).hide().removeClass("show")):a.inArray(a(this).val(),c)>=0?(d.hide(),a(".yith_ywraq_add_item_response-"+b.val()).show().removeClass("hide"),a(".yith_ywraq_add_item_browse-list-"+b.val()).show().removeClass("hide")):(d.show().removeClass("disabled"),a(".yith_ywraq_add_item_response-"+b.val()).hide().removeClass("show"),a(".yith_ywraq_add_item_browse-list-"+b.val()).hide().removeClass("show"))})},a.fn.yith_ywraq_variations(),a.fn.yith_ywraq_refresh_button=function(){var b=a('[name|="product_id"]'),c=b.val(),d=a(".add-to-quote-"+c).find("a.add-request-quote-button");d.parents(".yith-ywraq-add-to-quote");if(!a('[name|="variation_id"]').length)return!1},a.fn.yith_ywraq_refresh_button();var i=!1;a(document).on("click",".add-request-quote-button",function(b){b.preventDefault();var c=a(this),f=c.closest(".yith-ywraq-add-to-quote"),g="ac",h="";if(!c.hasClass("disabled")&&!i){if(h=c.closest(".cart").length?c.closest(".cart"):f.siblings(".cart").first().length?f.siblings(".cart").first():a(a(".composite_form").length?".composite_form":".cart"),void 0!==h[0]&&"function"==typeof h[0].checkValidity&&!h[0].checkValidity())return void a('<input type="submit">').hide().appendTo(h).click().remove();if(c.closest("ul.products").length>0)var j="",k=c.closest("li.product").find("a.add_to_cart_button"),l=k.data("product_id");else var j=c.closest(".product").find('input[name="add-to-cart"]'),k=c.closest(".product").find('input[name="product_id"]'),l=k.length?k.val():j.val();var m=void 0===l?c.data("product_id"):l;if(g=h.serializefiles(),g.append("context","frontend"),g.append("action","yith_ywraq_action"),g.append("ywraq_action","add_item"),g.append("product_id",c.data("product_id")),g.append("wp_nonce",c.data("wp_nonce")),g.append("yith-add-to-cart",c.data("product_id")),a(document).trigger("yith_ywraq_action_before"),"undefined"!=typeof yith_wapo_general&&!yith_wapo_general.do_submit)return!1;i=a.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_action"),dataType:"json",data:g,contentType:!1,processData:!1,beforeSend:function(){c.after(' <img src="'+e+'" >')},complete:function(){c.next().remove()},success:function(b){"true"==b.result||"exists"==b.result?("yes"==ywraq_frontend.go_to_the_list?window.location.href=b.rqa_url:(a(".yith_ywraq_add_item_product-response-"+m).show().removeClass("hide").html(b.message),a(".yith_ywraq_add_item_browse-list-"+m).show().removeClass("hide"),c.parent().hide().removeClass("show").addClass("addedd"),a(".add-to-quote-"+m).attr("data-variation",b.variations),d.length&&(d.ywraq_refresh_widget(),d=a(document).find(".widget_ywraq_list_quote, .widget_ywraq_mini_list_quote"))),a(document).trigger("yith_wwraq_added_successfully")):"false"==b.result&&(a(".yith_ywraq_add_item_response-"+m).show().removeClass("hide").html(b.message),a(document).trigger("yith_wwraq_error_while_adding")),i=!1}})}}),a.fn.serializefiles=function(){var b=a(this),c=new FormData;a.each(a(b).find("input[type='file']"),function(b,d){a.each(a(d)[0].files,function(a,b){c.append(d.name,b)})});var d=a(b).serializeArray(),e=!1;return a.each(d,function(a,b){"quantity"==b.name&&(e=!0),"add-to-cart"!=b.name&&c.append(b.name,b.value)}),!1===e&&c.append("quantity",1),c},a.fn.ywraq_refresh_widget=function(){d.each(function(){var b=a(this),c=b.find(".yith-ywraq-list-wrapper"),d=b.find(".yith-ywraq-list"),f=b.find(".yith-ywraq-list-widget-wrapper").data("instance");a.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_action"),data:f+"&ywraq_action=refresh_quote_list&action=yith_ywraq_action&context=frontend",beforeSend:function(){d.css("opacity",.5),b.hasClass("widget_ywraq_list_quote")&&c.prepend(' <img src="'+e+'" >')},complete:function(){b.hasClass("widget_ywraq_list_quote")&&c.next().remove(),d.css("opacity",1)},success:function(a){b.hasClass("widget_ywraq_mini_list_quote")?b.find(".yith-ywraq-list-widget-wrapper").html(a.mini):b.find(".yith-ywraq-list-widget-wrapper").html(a.large)}})})},a(document).on("click",".yith-ywraq-item-remove",function(b){b.preventDefault();var c=a(this),e=c.data("remove-item"),f=c.parents(".ywraq-wrapper"),h=(a("#yith-ywraq-form"),f.find(".wpcf7-form")),i="";i="context=frontend&action=yith_ywraq_action&ywraq_action=remove_item&key="+c.data("remove-item")+"&wp_nonce="+c.data("wp_nonce")+"&product_id="+c.data("product_id"),a.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_action"),dataType:"json",data:i,beforeSend:function(){c.find(".ajax-loading").css("visibility","visible")},complete:function(){c.siblings(".ajax-loading").css("visibility","hidden")},success:function(b){if(1===b){var c=a("[data-remove-item='"+e+"']").parents(".cart_item");if(c.hasClass("composite-parent")){var f=c.data("composite-id");a("[data-composite-id='"+f+"']").remove()}if(c.hasClass("bundle-parent")){var g=c.data("bundle-key");a("[data-bundle-key='"+g+"']").remove()}c.remove(),0===a(".cart_item").length&&(h.length&&h.remove(),a("#yith-ywraq-form, .yith-ywraq-mail-form-wrapper").remove(),a("#yith-ywraq-message").html(ywraq_frontend.no_product_in_list)),d.length&&(d.ywraq_refresh_widget(),d=a(document).find(".widget_ywraq_list_quote, .widget_ywraq_mini_list_quote")),a(document).trigger("yith_wwraq_removed_successfully")}else a(document).trigger("yith_wwraq_error_while_removing")}})});a(".wpcf7-submit").closest(".wpcf7").length>0&&a(document).find(".wpcf7").each(function(){var b=a(this);b.find('input[name="_wpcf7"]').val()==ywraq_frontend.cform7_id&&b.on("wpcf7:mailsent",function(){a.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_order_action"),dataType:"json",data:{lang:ywraq_frontend.current_lang,action:"yith_ywraq_order_action",context:"frontend",ywraq_order_action:"mail_sent_order_created"},success:function(a){""!=a.rqa_url&&(window.location.href=a.rqa_url)}})})}),a("#yith-ywrq-table-list").on("change",".qty",function(){a(this).val()<=0&&a(this).val(1)});var l=a(".quotes-actions").find(".reject");a(".my_account_quotes");l.length&&(l.prettyPhoto({hook:"data-rel",social_tools:!1,theme:"pp_woocommerce",horizontal_padding:20,opacity:.8,deeplinking:!1}),l.on("click",function(b){b.preventDefault();var c=a(this),d=c.parents(".quotes-actions").data("order_id"),e=a("#modal-order-number");ywraq_frontend.current_lang;e.text(d),a(".reject-quote-modal-button").attr("data-order_id",d),l.prettyPhoto({hook:"data-rel",social_tools:!1,theme:"pp_woocommerce",horizontal_padding:20,opacity:.8,deeplinking:!1})})),a(document).on("click",".close-quote-modal-button",function(b){b.preventDefault(),a.prettyPhoto.close()}),a(document).on("click",".reject-quote-modal-button",function(b){b.preventDefault();var c=a(this),d=c.data("order_id"),g=(a("#modal-order-number"),c.closest("body").find(".my_account_quotes")),h=g.find('[data-order_id="'+d+'"]').parent(),i="context=frontend&action=yith_ywraq_order_action&ywraq_order_action=reject_order&order_id="+d+"&lang="+ywraq_frontend.current_lang;a.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_order_action"),dataType:"json",data:i,beforeSend:function(){h.after(' <img src="'+e+'" >')},complete:function(){h.next().remove()},success:function(b){0!==b.result&&(h.find(".reject").hide(),h.find(".accept").hide(),h.find(".raq_status").removeClass("pending").addClass("rejected").text(b.status),a.prettyPhoto.close())}})});var n;a(document).on("click, change",".product-quantity input",function(b){void 0!==n&&n.abort();var c=a(this),d=c.closest("table").find(".raq-totals"),e=c.closest("tr").find(".product-subtotal"),f=c.attr("name");if(void 0===f){var g=c.closest(".product-quantity").find(".input-text.qty"),f=g.attr("name"),h=g.val(),i=f.match(/[^[\]]+(?=])/g);c.hasClass("plus")&&h++,c.hasClass("minus")&&h--;var j="context=frontend&action=yith_ywraq_action&ywraq_action=update_item_quantity&quantity="+h+"&key="+i[0]}else var h=c.val(),i=f.match(/[^[\]]+(?=])/g),j="context=frontend&action=yith_ywraq_action&ywraq_action=update_item_quantity&quantity="+h+"&key="+i[0];n=a.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_action"),dataType:"json",data:j,success:function(a){void 0!==a.total&&(e.html(a.line_total),d.length&&d.html(a.total))}})}),g.length>0&&1==ywraq_frontend.lock_shipping&&(g.find("input").attr("readonly","readonly"),g.find("select").attr("readonly","readonly")),h.length>0&&1==ywraq_frontend.lock_billing&&(h.find("input").attr("readonly","readonly"),h.find("select").attr("readonly","readonly")),a(document).bind("gform_confirmation_loaded",function(a,b){window.location.href=ywraq_frontend.rqa_url}),d.ywraq_refresh_widget()});